<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login-Creation Buzz</title>
    <link rel="shortcut icon" href="/Build-Week--Social-Media-Content-Scheduler/frontend/images/creation_buzz_logo-1.png"
        type="image/x-icon">
    <link rel="stylesheet" href="form.css">
</head>

<body>
    <div id="signin-form">
        <div><img src="/Build-Week--Social-Media-Content-Scheduler/frontend/images/creation_buzz_logo-1.png"
                height="40px"></div>
        <input type="email" name="" id="signin-mail" placeholder="Enter Your Mail Address">
        <input type="password" id="signin-password" placeholder="Enter Password">

        <div style="text-align: center;"> <button id="signin-btn"> Submit</button></div>
        <p style="text-align: center;">I dont't have account?<a style="text-decoration: none;"
                href="signup.html">Sign-up</a></p>
        <i id="error-login"></i>
    </div>
</body>

</html>






<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";
     import { 
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signOut,
    onAuthStateChanged

   } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyCLRuHwzVLgndB4rABibJbuIC_y5gZnRZs",
        authDomain: "social-media-db-1bb6f.firebaseapp.com",
        databaseURL: "https://social-media-db-1bb6f-default-rtdb.firebaseio.com",
        projectId: "social-media-db-1bb6f",
        storageBucket: "social-media-db-1bb6f.firebasestorage.app",
        messagingSenderId: "797390709264",
        appId: "1:797390709264:web:8178b280222b43443ce095",
        measurementId: "G-7YWTEN1XF1"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app)

     if (localStorage.getItem("isUnknown") === null ) {
        alert("You need to sign up first!");
        window.location.href = "/Build-Week--Social-Media-Content-Scheduler/frontend/forms/signup.html";
    }

    document.getElementById('signin-btn').addEventListener("click", () => {
        let email = document.getElementById('signin-mail').value
        let pass = document.getElementById('signin-password').value
            
        signInWithEmailAndPassword(auth, email, pass)
            .then((userCredentials) => {
                window.location.href = '/Build-Week--Social-Media-Content-Scheduler/frontend//pages/profile.html'


                localStorage.setItem("isLogged", "true")
                localStorage.setItem("mail",email)
            })
            .catch((error) => {
                document.getElementById('error-login').innerText = error.message
            })
    })

</script>